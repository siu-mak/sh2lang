#!/usr/bin/env bash
shadow() {
  local FOO="${1}"
  printf '%s\n' "$( ( typeset +x FOO; printenv FOO ) 2>/dev/null || printenv FOO 2>/dev/null || true )"
  printf '%s\n' "$FOO"
}

main() {
  (
    export FOO='outer'
    shadow 'local'; __sh2_status=$?; (exit $__sh2_status)
  )
}
__sh2_status=0
main "$@"
